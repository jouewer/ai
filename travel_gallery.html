<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<link rel="stylesheet" href="css/animate.css" />
		<title>我的旅行足迹</title>
		<link rel="shortcut icon" href="./img/dto.ico"/>
		<style>
			body {
				background-color: #f4f7f6;
				color: #333;
				font-family: "Microsoft YaHei", sans-serif;
				padding: 0;
				margin: 0;
			}
			
			/* Hero Section */
			.hero-section {
				height: 400px;
				position: relative;
				color: #fff;
				text-shadow: 0 2px 4px rgba(0,0,0,0.5);
				overflow: hidden;
				/* Flexbox centering */
				display: flex;
				align-items: center;
				justify-content: center;
			}
			.hero-carousel {
				width: 100%;
				height: 100%;
				position: absolute;
				top: 0;
				left: 0;
			}
			.hero-carousel .item,
			.hero-carousel .carousel-inner {
				height: 100%;
			}
			.hero-carousel img {
				width: 100%;
				height: 100%;
				object-fit: cover;
			}
			.hero-overlay {
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: rgba(0,0,0,0.3);
				pointer-events: none;
			}
			.hero-content {
				position: relative; /* Changed from absolute to relative for Flexbox */
				z-index: 20;
				text-align: center;
				pointer-events: none;
			}
			.hero-title {
				font-size: 48px;
				font-weight: bold;
				margin-bottom: 20px;
			}
			.hero-subtitle {
				font-size: 24px;
			}

			/* Back Button */
			.back-btn-container {
				position: fixed;
				top: 30px;
				left: 30px;
				z-index: 1000;
			}
			.btn-back {
				display: inline-block;
				padding: 10px 25px;
				background-color: rgba(255, 255, 255, 0.9);
				color: #40d2b1;
				border: 2px solid #40d2b1;
				border-radius: 30px;
				font-weight: bold;
				text-decoration: none;
				transition: all 0.3s ease;
				box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
			}
			.btn-back:hover {
				background-color: #40d2b1;
				color: #fff;
				transform: translateY(-2px);
				text-decoration: none;
			}

			/* Gallery Section */
			.gallery-section {
				padding: 60px 0;
			}
			.category-title {
				text-align: center;
				font-size: 32px;
				margin-bottom: 40px;
				color: #2c3e50;
				position: relative;
				padding-bottom: 15px;
			}
			.category-title::after {
				content: '';
				display: block;
				width: 60px;
				height: 3px;
				background: #40d2b1;
				margin: 15px auto 0;
			}
			
			.photo-card {
				background: #fff;
				border-radius: 8px;
				overflow: hidden;
				box-shadow: 0 4px 15px rgba(0,0,0,0.05);
				margin-bottom: 30px;
				transition: transform 0.3s ease;
				max-width: 90%; /* Limit card width */
				margin-left: auto; /* Center card */
				margin-right: auto; /* Center card */
			}
			.photo-card:hover {
				transform: translateY(-5px);
				box-shadow: 0 8px 25px rgba(0,0,0,0.1);
			}
			.photo-card img {
				width: 100%;
				height: 200px; /* Reduced from 250px */
				object-fit: cover;
				display: block;
				cursor: pointer; /* Indicate clickable */
			}
			/* Modal Styles */
			.modal-body {
				padding: 0;
				text-align: center; /* Center image horizontally */
				background: transparent;
			}
			.modal-content {
				background-color: transparent;
				border: none;
				box-shadow: none;
			}
			.modal-dialog {
				/* Ensure dialog allows centering and proper width */
				width: auto;
				max-width: 90%; /* Max width relative to screen */
				margin: 30px auto;
			}
			.modal-img {
				max-width: 100%;
				max-height: 85vh; /* Limit height to 85% of viewport height */
				width: auto; /* Allow width to adjust based on height */
				height: auto;
				border-radius: 4px;
				box-shadow: 0 5px 15px rgba(0,0,0,0.5);
				display: inline-block; /* Ensure text-align center works */
			}
			.modal-close-btn {
				position: absolute;
				top: -30px;
				right: 0; /* Align with right edge of image conceptually, though absolute to modal-content */
				color: #fff;
				font-size: 30px;
				cursor: pointer;
				z-index: 1050;
				opacity: 0.8;
				text-shadow: 0 2px 4px rgba(0,0,0,0.5);
			}
			.modal-close-btn:hover {
				opacity: 1;
				color: #40d2b1;
			}
			.photo-caption {
				padding: 15px;
				text-align: center;
				color: #666;
				font-size: 14px;
			}

			/* Footer */
			footer {
				background-color: #333;
				color: #fff;
				padding: 30px 0;
				text-align: center;
			}
		</style>
	</head>
	<body>

		<!-- Back Button -->
		<div class="back-btn-container wow fadeInDown">
			<a href="about.html" class="btn-back">
				<span class="glyphicon glyphicon-arrow-left"></span> 返回关于我
			</a>
		</div>

		<!-- Hero Section -->
		<div class="hero-section">
			<!-- Carousel -->
			<div id="heroCarousel" class="carousel slide hero-carousel" data-ride="carousel">
				<!-- Indicators -->
				<ol class="carousel-indicators">
					<li data-target="#heroCarousel" data-slide-to="0" class="active"></li>
					<li data-target="#heroCarousel" data-slide-to="1"></li>
					<li data-target="#heroCarousel" data-slide-to="2"></li>
				</ol>

				<!-- Wrapper for slides -->
				<div class="carousel-inner" role="listbox">
					<div class="item active">
						<img src="travel/cc1.jpg" alt="CC 1">
					</div>
					<div class="item">
						<img src="travel/ns1.jpg" alt="NS 1">
					</div>
					<div class="item">
						<img src="travel/yn1.jpg" alt="YN 1">
					</div>
				</div>

				<!-- Overlay placed inside carousel to be below controls but above images -->
				<div class="hero-overlay"></div>

				<!-- Controls -->
				<a class="left carousel-control" href="#heroCarousel" role="button" data-slide="prev">
					<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
					<span class="sr-only">Previous</span>
				</a>
				<a class="right carousel-control" href="#heroCarousel" role="button" data-slide="next">
					<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
					<span class="sr-only">Next</span>
				</a>
			</div>

			<div class="hero-content wow fadeInUp">
				<h1 class="hero-title">旅行日记</h1>
				<p class="hero-subtitle">用镜头记录美好瞬间</p>
			</div>
		</div>

		<div class="container gallery-section">
			
			<!-- Category: CC -->
			<div class="row">
				<div class="col-md-12">
					<h2 class="category-title wow fadeInDown">CC 之旅</h2>
				</div>
			</div>
			<div class="row" id="gallery-cc">
				<!-- CC1 - CC6 -->
				<div class="col-md-4 col-sm-6 wow fadeInUp" data-wow-delay="0.1s">
					<div class="photo-card">
						<img src="travel/cc1.jpg" alt="CC 1">
						<div class="photo-caption">CC 印象 1</div>
					</div>
				</div>
				<div class="col-md-4 col-sm-6 wow fadeInUp" data-wow-delay="0.2s">
					<div class="photo-card">
						<img src="travel/cc2.jpg" alt="CC 2">
						<div class="photo-caption">CC 印象 2</div>
					</div>
				</div>
				<div class="col-md-4 col-sm-6 wow fadeInUp" data-wow-delay="0.3s">
					<div class="photo-card">
						<img src="travel/cc3.jpg" alt="CC 3">
						<div class="photo-caption">CC 印象 3</div>
					</div>
				</div>
				<div class="col-md-4 col-sm-6 wow fadeInUp" data-wow-delay="0.4s">
					<div class="photo-card">
						<img src="travel/cc4.jpg" alt="CC 4">
						<div class="photo-caption">CC 印象 4</div>
					</div>
				</div>
				<div class="col-md-4 col-sm-6 wow fadeInUp" data-wow-delay="0.5s">
					<div class="photo-card">
						<img src="travel/cc5.jpg" alt="CC 5">
						<div class="photo-caption">CC 印象 5</div>
					</div>
				</div>
				<div class="col-md-4 col-sm-6 wow fadeInUp" data-wow-delay="0.6s">
					<div class="photo-card">
						<img src="travel/cc6.jpg" alt="CC 6">
						<div class="photo-caption">CC 印象 6</div>
					</div>
				</div>
			</div>

			<!-- Category: NS -->
			<div class="row" style="margin-top: 50px;">
				<div class="col-md-12">
					<h2 class="category-title wow fadeInDown">NS 记忆</h2>
				</div>
			</div>
			<div class="row" id="gallery-ns">
				<!-- NS1 - NS8 -->
				<div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.1s">
					<div class="photo-card">
						<img src="travel/ns1.jpg" alt="NS 1">
						<div class="photo-caption">NS 风景 1</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.2s">
					<div class="photo-card">
						<img src="travel/ns2.jpg" alt="NS 2">
						<div class="photo-caption">NS 风景 2</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.3s">
					<div class="photo-card">
						<img src="travel/ns3.jpg" alt="NS 3">
						<div class="photo-caption">NS 风景 3</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.4s">
					<div class="photo-card">
						<img src="travel/ns4.jpg" alt="NS 4">
						<div class="photo-caption">NS 风景 4</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.5s">
					<div class="photo-card">
						<img src="travel/ns5.jpg" alt="NS 5">
						<div class="photo-caption">NS 风景 5</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.6s">
					<div class="photo-card">
						<img src="travel/ns6.jpg" alt="NS 6">
						<div class="photo-caption">NS 风景 6</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.7s">
					<div class="photo-card">
						<img src="travel/ns7.jpg" alt="NS 7">
						<div class="photo-caption">NS 风景 7</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.8s">
					<div class="photo-card">
						<img src="travel/ns8.jpg" alt="NS 8">
						<div class="photo-caption">NS 风景 8</div>
					</div>
				</div>
			</div>

			<!-- Category: YN -->
			<div class="row" style="margin-top: 50px;">
				<div class="col-md-12">
					<h2 class="category-title wow fadeInDown">YN 时光</h2>
				</div>
			</div>
			<div class="row" id="gallery-yn">
				<!-- YN1 - YN8 -->
				<div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.1s">
					<div class="photo-card">
						<img src="travel/yn1.jpg" alt="YN 1">
						<div class="photo-caption">YN 旅途 1</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.2s">
					<div class="photo-card">
						<img src="travel/yn2.jpg" alt="YN 2">
						<div class="photo-caption">YN 旅途 2</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.3s">
					<div class="photo-card">
						<img src="travel/yn3.jpg" alt="YN 3">
						<div class="photo-caption">YN 旅途 3</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.4s">
					<div class="photo-card">
						<img src="travel/yn4.jpg" alt="YN 4">
						<div class="photo-caption">YN 旅途 4</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.5s">
					<div class="photo-card">
						<img src="travel/yn5.jpg" alt="YN 5">
						<div class="photo-caption">YN 旅途 5</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.6s">
					<div class="photo-card">
						<img src="travel/yn6.jpg" alt="YN 6">
						<div class="photo-caption">YN 旅途 6</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.7s">
					<div class="photo-card">
						<img src="travel/yn7.jpg" alt="YN 7">
						<div class="photo-caption">YN 旅途 7</div>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 wow fadeInUp" data-wow-delay="0.8s">
					<div class="photo-card">
						<img src="travel/yn8.jpg" alt="YN 8">
						<div class="photo-caption">YN 旅途 8</div>
					</div>
				</div>
			</div>

		</div>

		<footer>
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<p>&copy; 2024 <a href="login.html" style="color: #fff; text-decoration: none;">李琼渊的旅行日记</a>. All Rights Reserved.</p>
					</div>
				</div>
			</div>
		</footer>

		<!-- Image Preview Modal -->
		<div class="modal fade" id="imageModal" tabindex="-1" role="dialog" aria-labelledby="imageModalLabel">
			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content">
					<span class="glyphicon glyphicon-remove modal-close-btn" data-dismiss="modal"></span>
					<div class="modal-body">
						<img src="" class="modal-img" id="previewImage" alt="Full size preview">
					</div>
				</div>
			</div>
		</div>

		<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/wow.min.js"></script>
		<script>
			new WOW().init();
			// Initialize Carousel manually to ensure auto-play
			$(document).ready(function(){
				$('#heroCarousel').carousel({
					interval: 3000, // Change slide every 3 seconds
					pause: "hover"
				});

				// Load Custom Uploaded Images from LocalStorage
				var customImages = JSON.parse(localStorage.getItem('galleryImages') || '[]');
				customImages.forEach(function(img) {
                    // Check if image should be displayed in travel gallery
                    // Default to true if displayLocation is undefined (backward compatibility)
                    if (img.displayLocation && img.displayLocation !== 'travel_gallery' && img.displayLocation !== 'both') {
                        return;
                    }

					var containerId = '';
					var colClass = '';
					
					if(img.category === 'cc') {
						containerId = '#gallery-cc';
						colClass = 'col-md-4 col-sm-6';
					} else if(img.category === 'ns') {
						containerId = '#gallery-ns';
						colClass = 'col-md-3 col-sm-6';
					} else if(img.category === 'yn') {
						containerId = '#gallery-yn';
						colClass = 'col-md-3 col-sm-6';
					}
					
					if(containerId) {
						var html = `
							<div class="${colClass} wow fadeInUp" data-wow-delay="0.1s">
								<div class="photo-card">
									<img src="${img.src}" alt="${img.caption}">
									<div class="photo-caption">${img.caption}</div>
								</div>
							</div>
						`;
						$(containerId).append(html);
					}
				});

				// Image Click Handler for Lightbox (Delegate for dynamic elements)
				$(document).on('click', '.photo-card img', function(){
					var imgSrc = $(this).attr('src');
					$('#previewImage').attr('src', imgSrc);
					$('#imageModal').modal('show');
				});
			});
		</script>
	</body>
</html>